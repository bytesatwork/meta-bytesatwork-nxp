From a38839c57159f048174f51f0cfd5b775719c7bb3 Mon Sep 17 00:00:00 2001
From: Rico Ganahl <rico.ganahl@bytesatwork.ch>
Date: Thu, 15 Jun 2023 11:07:37 +0200
Subject: [PATCH] configs: bytedevkit: enable clock control, increase sf speed

Clock control allows to set the SPI clock rate.

Signed-off-by: Rico Ganahl <rico.ganahl@bytesatwork.ch>
---
 configs/bytedevkit_defconfig      | 4 +++-
 configs/bytedevkit_fspi_defconfig | 4 +++-
 2 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/configs/bytedevkit_defconfig b/configs/bytedevkit_defconfig
index bf9b4733e1..6f7027367a 100644
--- a/configs/bytedevkit_defconfig
+++ b/configs/bytedevkit_defconfig
@@ -47,6 +47,8 @@ CONFIG_CMD_FS_GENERIC=y
 CONFIG_OF_CONTROL=y
 CONFIG_DEFAULT_DEVICE_TREE="imx8mm-bytedevkit"
 CONFIG_ENV_IS_IN_SPI_FLASH=y
+CONFIG_CLK_COMPOSITE_CCF=y
+CONFIG_CLK_IMX8MM=y
 CONFIG_USB_FUNCTION_FASTBOOT=y
 CONFIG_FASTBOOT_BUF_ADDR=0x42800000
 CONFIG_FASTBOOT_BUF_SIZE=0x40000000
@@ -61,7 +63,7 @@ CONFIG_MMC_HS400_SUPPORT=y
 CONFIG_FSL_USDHC=y
 CONFIG_DM_SPI_FLASH=y
 CONFIG_SF_DEFAULT_MODE=0
-CONFIG_SF_DEFAULT_SPEED=40000000
+CONFIG_SF_DEFAULT_SPEED=50000000
 CONFIG_SPI_FLASH_BAR=y
 CONFIG_SPI_FLASH_ISSI=y
 CONFIG_SPI_FLASH_MACRONIX=y
diff --git a/configs/bytedevkit_fspi_defconfig b/configs/bytedevkit_fspi_defconfig
index 542eb4b538..10c77bc817 100644
--- a/configs/bytedevkit_fspi_defconfig
+++ b/configs/bytedevkit_fspi_defconfig
@@ -47,6 +47,8 @@ CONFIG_CMD_FS_GENERIC=y
 CONFIG_OF_CONTROL=y
 CONFIG_DEFAULT_DEVICE_TREE="imx8mm-bytedevkit"
 CONFIG_ENV_IS_IN_SPI_FLASH=y
+CONFIG_CLK_COMPOSITE_CCF=y
+CONFIG_CLK_IMX8MM=y
 CONFIG_USB_FUNCTION_FASTBOOT=y
 CONFIG_FASTBOOT_BUF_ADDR=0x42800000
 CONFIG_FASTBOOT_BUF_SIZE=0x40000000
@@ -61,7 +63,7 @@ CONFIG_MMC_HS400_SUPPORT=y
 CONFIG_FSL_USDHC=y
 CONFIG_DM_SPI_FLASH=y
 CONFIG_SF_DEFAULT_MODE=0
-CONFIG_SF_DEFAULT_SPEED=40000000
+CONFIG_SF_DEFAULT_SPEED=50000000
 CONFIG_SPI_FLASH_BAR=y
 CONFIG_SPI_FLASH_ISSI=y
 CONFIG_SPI_FLASH_MACRONIX=y
-- 
2.30.2

